{{#if isFinished}}
  {{media-element src=controllers.currentlyPlaying.fileUrl poster=controllers.currentlyPlaying.posterUrl didEnd="videoDidEnd"}}
  <table class="playlist">
    <thead>
      <tr>
        <th></th>
        <th>Filename</th>
        <th>Type</th>
        <th>Shared</th>
      </tr>
    </thead>
    <tbody>
      {{#each pieces itemController="piece"}}
        <tr {{bind-attr class=":playlist__item playing:playlist__item--active"}} data-test="piece-{{unbound id}}">
          <td class="playlist__actions">
            <a class="playlist__action" {{action 'download' fileUrl}}><i class="fa fa-cloud-download"></i></a>
            {{#if isPlayable}}
              <a class="playlist__action" {{action 'play' this}}><i class="fa fa-play-circle"></i></a>
            {{/if}}
          </td>
          <td {{action 'play' this}} class="playlist__filename">{{filename}}</td>
          <td {{action 'play' this}} class="playlist__filetype">{{filetype}}</td>
          <td class="playlist__is-shared">
            {{check-box checked=shared action="savePiece" data-test="share-piece"}}
          </td>
        </tr>
      {{/each}}
    </tbody>
  </table>
  
  <h1 class="push--bottom">Share</h1>
  <div class="row">
    <div class="col-md-2 text-right">
      <h5>Share link:</h5>
    </div>

    <div class="col-md-8">
      <div class="form-group">
        <div class="input-group">
          <input {{bind-attr value=shareLink}} class="form-control" readonly="readonly" data-test="preview-link"></input>
          <span class="input-group-btn">
            <button class="btn btn-default" type="button"><i class="fa fa-copy"></i> copy</button>
          </span>
        </div>
        <span class="help-block">Use this link to share your recording with others. Only shared pieces will be visible</span>
      </div>
    </div>

    <div class="col-md-2">
      {{#link-to 'recording.shared' model class="btn btn-primary btn-block"}}Preview{{/link-to}}
    </div>
  </div>

{{else}}

  {{#if isRequested}}
    <div class="alert alert-success">
      <h4>Thanks for requesting!</h4>
      <p>I'll take a look at my schedule and let you know if I'm available.</p>
    </div>
  {{/if}}

  <div class="push">
       <dl>
      <dt>Status:</dt>
      <dd class="recording__state">
        <label {{bind-attr class=":label labelClass"}}>{{state}}</label>
      </dd>
    </dl>
    <dl>
      <dt>When:</dt>
      <dd class="recording__datetime">{{datetime datetime}}</dd>
    </dl>
    <dl>
      <dt>Where:</dt>
      <dd class="recording__location">{{location}}</dd>
    </dl>
    <dl>
      <dt>CDs:</dt>
      <dd class="recording__cds">{{cds}}</dd>
    </dl>
    <dl>
      <dt>DVDs:</dt>
      <dd class="recording__dvds">{{dvds}}</dd>
    </dl>
  </div>
{{/if}}
